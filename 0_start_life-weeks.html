<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FYF - Life in Weeks</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* FYF Refined Color System */
            
            /* Foundation - Deep Darks */
            --fyf-noir: #0A0A0A;
            --fyf-carbon: #1A1A1A;
            --fyf-charcoal: #2D2D3F;
            --fyf-smoke: #3A3A4A;
            
            /* Primary Accents - Sophisticated */
            --fyf-coral: #FF6B6B;
            --fyf-coral-dark: #E55555;
            --fyf-mint: #4ECDC4;
            --fyf-mint-dark: #3BA99F;
            
            /* Secondary Palette */
            --fyf-cream: #FFF8E7;
            --fyf-bone: #F5F0E8;
            --fyf-steel: #B8BCC8;
            --fyf-mauve: #9B7E9E;
            
            /* Subtle Gradients */
            --gradient-dark: linear-gradient(135deg, #0A0A0A 0%, #2D2D3F 100%);
            --gradient-carbon: linear-gradient(180deg, #1A1A1A 0%, #2D2D3F 50%, #1A1A1A 100%);
            --gradient-coral-mint: linear-gradient(90deg, #FF6B6B 0%, #4ECDC4 100%);
            --gradient-subtle: linear-gradient(135deg, #2D2D3F 0%, #3A3A4A 100%);
            --gradient-mauve: linear-gradient(135deg, #9B7E9E 0%, #FF6B6B 100%);
            
            /* Typography */
            --font-display: 'Space Grotesk', sans-serif;
            --font-body: 'Inter', -apple-system, sans-serif;
            
            /* Shadows & Glows */
            --glow-coral: 0 0 40px rgba(255, 107, 107, 0.3);
            --glow-mint: 0 0 40px rgba(78, 205, 196, 0.3);
            --shadow-deep: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--fyf-noir);
            color: var(--fyf-cream);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 100vw;
            margin: 0 auto;
            padding: 0;
        }

        .main-view {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .grid-view {
            height: 100vh;
            display: grid;
            grid-template-columns: 25% 75%;
            gap: 2rem;
            padding: 2rem;
            padding-right: 60px;
            overflow: hidden;
        }

        .fyf-header {
            background: var(--gradient-dark);
            border-radius: 1rem;
            padding: 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .left-panel {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            padding: 2rem;
            gap: 0.5rem;
            max-width: 280px;
        }

        .title-container {
            flex-shrink: 0;
            width: fit-content;
        }

        .accordion-toggle-small {
            background: transparent;
            border: none;
            color: var(--fyf-coral);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
            align-self: flex-start;
            margin-left: 0.5rem;
        }

        .accordion-toggle-small:hover {
            transform: scale(1.2);
        }

        .right-panel {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            padding-right: 40px;
            grid-column: 2;
            position: relative;
        }

        .fyf-header::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            background: radial-gradient(circle at 30% 20%, var(--fyf-coral) 0%, transparent 40%),
                        radial-gradient(circle at 70% 80%, var(--fyf-mint) 0%, transparent 40%);
            opacity: 0.05;
            animation: float 30s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translate(-5%, -5%) scale(1); }
            50% { transform: translate(5%, 5%) scale(1.1); }
        }

        .fyf-display {
            font-family: var(--font-display);
            font-weight: 700;
            letter-spacing: -0.03em;
            line-height: 0.95;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 1rem;
            text-align: left;
        }

        .title-container h1 {
            text-align: left;
            margin-bottom: 1rem;
        }

        .grid-title {
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: 2rem;
            text-align: center;
        }

        .coral { color: var(--fyf-coral); }
        .cream { color: var(--fyf-cream); }
        .steel { color: var(--fyf-steel); }
        .mint { color: var(--fyf-mint); }
        .mauve { color: var(--fyf-mauve); }

        .gradient-text {
            background: var(--gradient-coral-mint);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: 1.2rem;
            color: var(--fyf-steel);
            letter-spacing: 0.05em;
            position: relative;
            z-index: 1;
        }

        .stats-accordion {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            position: relative;
            width: fit-content;
            max-width: 280px;
        }

        .stats-accordion.open {
            max-height: 800px;
        }

        .stats-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 1rem 0;
        }

        .stats-scroll-wrapper {
            overflow: hidden;
            width: 280px;
            height: 100%;
            position: relative;
        }

        .stats-nav-left,
        .stats-nav-right {
            background: transparent;
            border: none;
            color: var(--fyf-coral);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stats-nav-left:hover,
        .stats-nav-right:hover {
            transform: scale(1.3);
            color: var(--fyf-mint);
        }

        .input-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 1rem;
            padding: 2rem;
            backdrop-filter: blur(10px);
            max-width: 500px;
        }

        .fyf-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            padding: 1rem;
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .fyf-card:hover {
            background: rgba(255, 255, 255, 0.04);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .input-group {
            margin-bottom: 2rem;
        }

        .date-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border: 2px solid var(--fyf-steel);
            border-radius: 0.5rem;
            color: var(--fyf-cream);
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .date-input:focus {
            outline: none;
            border-color: var(--fyf-coral);
            box-shadow: var(--glow-coral);
        }

        .fyf-btn {
            font-family: var(--font-display);
            font-weight: 600;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            border: 2px solid;
            background: transparent;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: 0.02em;
            font-size: 1rem;
        }

        .fyf-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .fyf-btn-primary {
            border-color: var(--fyf-coral);
            color: var(--fyf-coral);
            width: 100%;
        }

        .fyf-btn-primary:hover:not(:disabled) {
            background: var(--fyf-coral);
            color: var(--fyf-noir);
            box-shadow: var(--glow-coral);
        }

        .fyf-btn-secondary {
            border-color: var(--fyf-mint);
            color: var(--fyf-mint);
        }

        .fyf-btn-secondary:hover {
            background: var(--fyf-mint);
            color: var(--fyf-noir);
            box-shadow: var(--glow-mint);
        }

        .week-grid {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 2.8px;
            width: fit-content;
            height: 100%;
            overflow: auto;
            padding: 1rem;
        }

        .week-row {
            display: flex;
            gap: 2.8px;
        }

        .week-cell {
            width: 8px;
            height: 8px;
            border-radius: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            /* All cells start as gray */
            background: rgba(184, 188, 200, 0.15);
            border: 1px solid rgba(184, 188, 200, 0.3);
        }

        .week-cell.filling {
            animation: fillToRed 0.2s ease-out forwards;
        }

        @keyframes fillToRed {
            0% {
                background: rgba(184, 188, 200, 0.15);
                transform: scale(1);
            }
            50% {
                transform: scale(1.15);
            }
            100% {
                background: var(--fyf-coral);
                box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
                border: none;
                transform: scale(1);
            }
        }

        .week-cell.week-past {
            background: var(--fyf-coral);
            box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
            border: none;
        }

        .week-cell.week-current {
            background: var(--fyf-mint);
            box-shadow: 0 0 12px var(--fyf-mint);
            animation: pulse 2s infinite;
            border: none;
        }

        .week-cell.week-future {
            background: rgba(184, 188, 200, 0.15);
            border: 1px solid rgba(184, 188, 200, 0.3);
        }

        @media (min-width: 1400px) {
            .week-cell {
                width: 10px;
                height: 10px;
            }
        }

        @media (max-width: 768px) {
            .week-cell {
                width: 6px;
                height: 6px;
            }
            .week-grid {
                gap: 0.1rem;
            }
            .week-row {
                gap: 0.1rem;
            }
        }

        .week-past {
            background: var(--fyf-coral);
            box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
        }

        .week-current {
            background: var(--fyf-mint);
            box-shadow: 0 0 12px var(--fyf-mint);
            animation: pulse 2s infinite;
        }

        .week-future {
            background: rgba(184, 188, 200, 0.15);
            border: 1px solid rgba(184, 188, 200, 0.3);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .legend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            font-size: 0.9rem;
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            flex-wrap: nowrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .reset-btn {
            background: transparent;
            border: 1px solid var(--fyf-steel);
            color: var(--fyf-steel);
            padding: 0.3rem 0.8rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 1rem;
        }

        .reset-btn:hover {
            background: var(--fyf-steel);
            color: var(--fyf-noir);
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }

        .stats-grid {
            display: flex;
            flex-direction: row;
            gap: 0;
            transition: transform 0.5s ease;
        }

        .stat-section {
            min-width: 280px;
            width: 280px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .stat-section h3 {
            font-family: var(--font-display);
            font-size: 1rem;
            margin-bottom: 0.75rem;
        }

        .stat-item {
            border-left: 3px solid;
            padding-left: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .stat-item.coral { border-color: var(--fyf-coral); }
        .stat-item.mint { border-color: var(--fyf-mint); }
        .stat-item.mauve { border-color: var(--fyf-mauve); }

        .stat-item p {
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .stat-number {
            font-weight: bold;
            font-size: 0.9rem;
        }

        .hidden {
            display: none;
        }

        .hover-info {
            text-align: center;
            padding: 1rem;
            background: var(--gradient-subtle);
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .text-center {
            text-align: center;
        }

        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mt-8 { margin-top: 2rem; }

        /* Typewriter Styles */
        .typewriter-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            background: var(--fyf-noir);
        }

        .blackhole-bg {
            height: 100%;
            width: 100%;
            position: absolute;
            display: flex;
            top: 0;
            left: 0;
        }

        .blackhole-bg canvas {
            position: absolute;
            z-index: 1;
            width: 100%;
            height: 100%;
            margin: auto;
        }

        .typewriter-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 10;
            overflow: hidden;
        }

        .content {
            position: relative;
            z-index: 1;
            text-align: center;
            background: none;
            border: none;
        }

        .title {
            font-size: clamp(2.5rem, 8vw, 6rem);
            font-weight: 700;
            letter-spacing: -0.03em;
            line-height: 0.95;
            margin: 0;
            background: none;
            border: none;
        }

        .fuck-line {
            color: var(--fyf-coral);
            margin-bottom: 0.15em;
            display: block;
            text-align: center;
        }

        .your-line {
            color: var(--fyf-cream);
            font-weight: 500;
            margin-bottom: 0.15em;
            display: block;
            text-align: center;
        }

        .future-line {
            background: var(--gradient-coral-mint);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
            text-align: center;
        }

        /* Navigation Section Styles */
        .navigation-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--fyf-noir);
            position: relative;
        }

        .nav-container {
            display: flex;
            flex-direction: column;
            gap: 3rem;
            align-items: center;
        }

        .nav-item {
            text-decoration: none;
            transition: all 0.4s ease;
            position: relative;
        }

        .nav-text {
            font-family: 'Space Grotesk', sans-serif;
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--fyf-steel);
            transition: all 0.4s ease;
            display: block;
        }

        .nav-item:hover .nav-text {
            color: var(--fyf-coral);
            transform: translateX(20px);
        }

        .nav-item:nth-child(2):hover .nav-text {
            color: var(--fyf-mint);
        }

        .nav-item:nth-child(3):hover .nav-text {
            background: var(--gradient-coral-mint);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .cursor {
            color: var(--fyf-mint);
            margin-left: 2px;
            animation: blink 1.2s infinite ease-in-out;
        }

        .cursor.hidden {
            display: none;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .tagline {
            font-size: 1.2rem;
            font-weight: 400;
            color: var(--fyf-steel);
            margin-top: 2rem;
            letter-spacing: 0.05em;
            font-family: 'Inter', sans-serif;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease-out;
        }

        .tagline.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .text-phase-0 {
            color: var(--fyf-coral);
        }

        .text-phase-1 {
            color: var(--fyf-cream);
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Initial Input View -->
        <div id="inputSection" class="main-view">
            <div class="input-card">
                <h2 class="fyf-display text-center mb-6" style="font-size: 2rem;">Wann wurdest du geboren?</h2>
                <div class="input-group">
                    <input type="date" id="birthdate" class="date-input" required>
                </div>
                <button onclick="calculateStats()" class="fyf-btn fyf-btn-primary" id="submitBtn" disabled>
                    Visualisierung starten
                </button>
            </div>
        </div>

        <!-- Grid View -->
        <div id="gridSection" class="grid-view hidden">
            <!-- Left Panel - Title + Toggle + Stats -->
            <div class="left-panel">
                <div class="title-container">
                    <h1 class="fyf-display">
                        <div class="coral">Life</div>
                        <div class="cream">in</div>
                        <div class="gradient-text">Weeks</div>
                    </h1>
                </div>

                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <button class="accordion-toggle-small" onclick="toggleStats()">
                        <span id="toggleArrow">▼</span>
                    </button>
                    <div class="stats-nav-left" onclick="scrollStats(-1)">◄</div>
                    <div class="stats-nav-right" onclick="scrollStats(1)">►</div>
                </div>

                <!-- Stats Accordion -->
                <div class="stats-accordion" id="statsAccordion">
                    <div class="stats-container">
                        <div class="stats-scroll-wrapper" id="statsScrollWrapper">
                            <div class="stats-grid" id="statsGrid">
                                <div class="fyf-card stat-section">
                                    <h3 class="gradient-text">Lebensmetriken</h3>
                                    <div class="stat-item coral">
                                        <p class="steel">Du hast <span class="coral stat-number" id="weeksLived">0</span> Wochen der Existenz erlebt, das sind <span class="coral stat-number" id="percentageLived">0</span>%</p>
                                    </div>
                                    <div class="stat-item mint">
                                        <p class="steel">Das entspricht <span class="mint stat-number" id="daysLived">0</span> Tagen des Bewusstseins</p>
                                    </div>
                                    <div class="stat-item mauve">
                                        <p class="steel">Dein Herz-Kreislauf-System hat ungefähr <span class="mauve stat-number" id="heartbeats">0</span> mal geschlagen</p>
                                    </div>
                                </div>

                                <div class="fyf-card stat-section">
                                    <h3 class="gradient-text">Gesellschaftlicher Kontext</h3>
                                    <div class="stat-item coral">
                                        <p class="steel">Während deiner Lebenszeit wuchs die Menschheit von <span class="coral stat-number" id="birthPopulation">0</span> auf über <span class="coral stat-number">8 Milliarden</span> bewusste Wesen.</p>
                                    </div>
                                    <div class="stat-item mint">
                                        <p class="steel">Statistisch gesehen hast du wahrscheinlich etwa <span class="mint stat-number" id="peopleMet">0</span> der ~80.000 Menschen getroffen, die du in deinem Leben begegnen wirst.</p>
                                    </div>
                                    <div class="stat-item mauve">
                                        <p class="steel">Die Menschheit hat seit deiner Ankunft <span class="mauve stat-number" id="totalBirths">0</span> neue Leben beginnen und <span class="mauve stat-number" id="totalDeaths">0</span> enden sehen.</p>
                                    </div>
                                </div>

                                <div class="fyf-card stat-section">
                                    <h3 class="gradient-text">Kosmische Perspektive</h3>
                                    <div class="stat-item coral">
                                        <p class="steel">Die Erde hat dich etwa <span class="coral stat-number" id="distanceTraveled">0</span> Kilometer durch die kosmische Leere auf ihrer Sonnenumlaufbahn transportiert.</p>
                                    </div>
                                    <div class="stat-item mint">
                                        <p class="steel">Deine Existenz umfasst nur <span class="mint stat-number" id="universePercentage">0</span>% der 13,8 Milliarden Jahre währenden Evolution des Universums.</p>
                                    </div>
                                    <div class="stat-item mauve">
                                        <p class="steel">Unser Sonnensystem hat während deiner Lebenszeit <span class="mauve stat-number" id="galaxyDistance">0</span> Kilometer durch die Spiralarme der Milchstraße zurückgelegt.</p>
                                    </div>
                                </div>

                                <div class="fyf-card stat-section">
                                    <h3 class="gradient-text">Natürliche Rhythmen</h3>
                                    <div class="stat-item coral">
                                        <p class="steel">Du hast <span class="coral stat-number" id="lunarCycles">0</span> Mondphasen miterlebt und <span class="coral stat-number" id="solarYears">0</span> Sonnenumrundungen vollendet.</p>
                                    </div>
                                    <div class="stat-item mint">
                                        <p class="steel">Verglichen mit einem jahrtausendelangen Mammutbaum stellt deine aktuelle Zeitinvestition <span class="mint stat-number" id="sequoiaPercentage">0</span>% seiner potenziellen Lebensspanne dar.</p>
                                    </div>
                                    <div class="stat-item mauve">
                                        <p class="steel">Dein physischer Körper hat mehrmals eine vollständige Zellregeneration durchlaufen. Du bestehst buchstäblich nicht mehr aus derselben atomaren Materie, die du bei der Geburt hattest.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Grid + Legend -->
            <div class="right-panel">
                <div id="weekGrid" class="week-grid"></div>

                <div id="hoverInfo" class="hover-info hidden">
                    <p id="hoverText" class="steel"></p>
                </div>

                <!-- Legend (under grid, flex-start) -->
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color week-past"></div>
                        <span class="steel">Vergangenheit (<span id="pastCount">0</span> Wochen)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color week-current"></div>
                        <span class="mint">Gegenwart</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color week-future"></div>
                        <span class="steel">Zukunft (<span id="futureCount">0</span> Wochen)</span>
                    </div>
                    <button onclick="resetVisualization()" class="reset-btn">
                        Zurücksetzen
                    </button>
                </div>
            </div>
        </div>

        <!-- Typewriter Section (after grid) -->
        <div id="typewriterSection" class="typewriter-section hidden">
            <div id="blackhole" class="blackhole-bg">
                <div class="typewriter-container">
                    <div class="content" onclick="scrollToNavigation()">
                        <h1 class="title" style="cursor: pointer;">
                            <div class="fuck-line">FUCK...</div>
                            <div class="your-line">YOUR</div>
                            <div class="future-line">FUTURE</div>
                        </h1>
                        <p class="tagline">Ready to own your time?</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Section -->
        <div id="navigationSection" class="navigation-section hidden">
            <div class="nav-container">
                <a href="#guide" class="nav-item">
                    <span class="nav-text">GUIDE</span>
                </a>
                <a href="#people" class="nav-item">
                    <span class="nav-text">PEOPLE</span>
                </a>
                <a href="#access" class="nav-item">
                    <span class="nav-text">ACCESS</span>
                </a>
            </div>
        </div>

        <!-- Horizontal Scrollable Stats -->
        <div id="scrollContent" class="scroll-content hidden">
            <div class="stats-container">
                <div class="stats-scroll-wrapper" onclick="scrollStats(1)">
                    <div class="stats-grid" id="statsGrid">
                <div class="fyf-card stat-section">
                    <h3 class="gradient-text">Lebensmetriken</h3>
                    <div class="stat-item coral">
                        <p class="steel">Du hast <span class="coral stat-number" id="weeksLived">0</span> Wochen der Existenz erlebt, das sind <span class="coral stat-number" id="percentageLived">0</span>% einer vollständigen menschlichen Reise.</p>
                    </div>
                    <div class="stat-item mint">
                        <p class="steel">Das entspricht <span class="mint stat-number" id="daysLived">0</span> Tagen des Bewusstseins über etwa <span class="mint stat-number" id="seasons">0</span> Jahreszeiten hinweg.</p>
                    </div>
                    <div class="stat-item mauve">
                        <p class="steel">Dein Herz-Kreislauf-System hat ungefähr <span class="mauve stat-number" id="heartbeats">0</span> Schläge vollendet, während du etwa <span class="mauve stat-number" id="breaths">0</span> Atemzüge genommen hast.</p>
                    </div>
                </div>

                <div class="fyf-card stat-section">
                    <h3 class="gradient-text">Gesellschaftlicher Kontext</h3>
                    <div class="stat-item coral">
                        <p class="steel">Während deiner Lebenszeit wuchs die Menschheit von <span class="coral stat-number" id="birthPopulation">0</span> auf über <span class="coral stat-number">8 Milliarden</span> bewusste Wesen.</p>
                    </div>
                    <div class="stat-item mint">
                        <p class="steel">Statistisch gesehen hast du wahrscheinlich etwa <span class="mint stat-number" id="peopleMet">0</span> der ~80.000 Menschen getroffen, die du in deinem Leben begegnen wirst.</p>
                    </div>
                    <div class="stat-item mauve">
                        <p class="steel">Die Menschheit hat seit deiner Ankunft <span class="mauve stat-number" id="totalBirths">0</span> neue Leben beginnen und <span class="mauve stat-number" id="totalDeaths">0</span> enden sehen.</p>
                    </div>
                </div>

                <div class="fyf-card stat-section">
                    <h3 class="gradient-text">Kosmische Perspektive</h3>
                    <div class="stat-item coral">
                        <p class="steel">Die Erde hat dich etwa <span class="coral stat-number" id="distanceTraveled">0</span> Kilometer durch die kosmische Leere auf ihrer Sonnenumlaufbahn transportiert.</p>
                    </div>
                    <div class="stat-item mint">
                        <p class="steel">Deine Existenz umfasst nur <span class="mint stat-number" id="universePercentage">0</span>% der 13,8 Milliarden Jahre währenden Evolution des Universums.</p>
                    </div>
                    <div class="stat-item mauve">
                        <p class="steel">Unser Sonnensystem hat während deiner Lebenszeit <span class="mauve stat-number" id="galaxyDistance">0</span> Kilometer durch die Spiralarme der Milchstraße zurückgelegt.</p>
                    </div>
                </div>

                <div class="fyf-card stat-section">
                    <h3 class="gradient-text">Natürliche Rhythmen</h3>
                    <div class="stat-item coral">
                        <p class="steel">Du hast <span class="coral stat-number" id="lunarCycles">0</span> Mondphasen miterlebt und <span class="coral stat-number" id="solarYears">0</span> Sonnenumrundungen vollendet.</p>
                    </div>
                    <div class="stat-item mint">
                        <p class="steel">Verglichen mit einem jahrtausendelangen Mammutbaum stellt deine aktuelle Zeitinvestition <span class="mint stat-number" id="sequoiaPercentage">0</span>% seiner potenziellen Lebensspanne dar.</p>
                    </div>
                    <div class="stat-item mauve">
                        <p class="steel">Dein physischer Körper hat mehrmals eine vollständige Zellregeneration durchlaufen. Du bestehst buchstäblich nicht mehr aus derselben atomaren Materie, die du bei der Geburt hattest.</p>
                    </div>
                </div>
            </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Typewriter class
        class FYFTypewriter {
            constructor() {
                this.textElement = document.getElementById('text-content');
                this.cursorElement = document.getElementById('cursor');
                this.taglineElement = document.getElementById('tagline');
                this.currentText = '';
                this.phase = 0;
                this.showCursor = true;

                this.init();
            }

            async init() {
                await this.startSequence();
            }

            async startSequence() {
                try {
                    // Hide cursor completely
                    this.cursorElement.classList.add('hidden');

                    // Phase 1: Type "FUCK"
                    this.phase = 0;
                    await this.typeText('FUCK', 100);
                    await this.pause(400);

                    // Phase 2: Add dots with dramatic pauses
                    await this.addText('.', 150);
                    await this.pause(250);
                    await this.addText('.', 150);
                    await this.pause(250);
                    await this.addText('.', 150);
                    await this.pause(600);

                    // Phase 3: Clear and start new structure
                    this.currentText = '';
                    this.phase = 1;
                    this.updateDisplay();
                    await this.pause(200);

                    // Phase 4: Type "YOUR"
                    await this.typeText('YOUR', 80);
                    await this.pause(300);

                    // Phase 5: Add "FUTURE"
                    this.phase = 2;
                    this.updateDisplay();
                    await this.pause(800);

                    // Show tagline
                    this.taglineElement.classList.add('visible');

                } catch (error) {
                    console.error('Typewriter sequence error:', error);
                }
            }

            typeText(text, speed = 150) {
                return new Promise((resolve) => {
                    let index = 0;
                    const timer = setInterval(() => {
                        this.currentText = text.slice(0, index + 1);
                        this.updateDisplay();
                        index++;
                        if (index >= text.length) {
                            clearInterval(timer);
                            resolve();
                        }
                    }, speed);
                });
            }

            addText(text, speed = 150) {
                return new Promise((resolve) => {
                    this.currentText += text;
                    this.updateDisplay();
                    setTimeout(() => resolve(), speed);
                });
            }

            pause(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            updateDisplay() {
                if (this.phase === 0) {
                    // Phase 0: FUCK with dots - all coral
                    this.textElement.innerHTML = `<span class="text-phase-0">${this.currentText}</span>`;
                } else if (this.phase === 1) {
                    // Phase 1: Show FUCK... and YOUR
                    this.textElement.innerHTML = `
                        <div class="fuck-line">FUCK...</div>
                        <div class="text-phase-1">${this.currentText}</div>
                    `;
                } else if (this.phase === 2) {
                    // Phase 2: FUCK..., YOUR, FUTURE - all visible
                    this.textElement.innerHTML = `
                        <div class="fuck-line">FUCK...</div>
                        <div class="your-line">YOUR</div>
                        <div class="future-line">FUTURE</div>
                    `;
                }
            }
        }

        // Life in Weeks functionality
        let currentStats = null;
        let currentStatIndex = 0;
        let totalStatSections = 4;

        // Enable submit button when date is selected
        document.getElementById('birthdate').addEventListener('change', function() {
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.disabled = !this.value;
        });

        function formatNumber(num) {
            return new Intl.NumberFormat().format(num);
        }

        function getPopulationAtYear(year) {
            const populationData = {
                1950: 2.5, 1960: 3.0, 1970: 3.7, 1980: 4.4, 1990: 5.3,
                2000: 6.1, 2010: 6.9, 2020: 7.8, 2025: 8.1
            };
            
            const years = Object.keys(populationData).map(Number);
            const closestYear = years.reduce((prev, curr) => 
                Math.abs(curr - year) < Math.abs(prev - year) ? curr : prev
            );
            
            return Math.round(populationData[closestYear] * 1000000000);
        }

        function calculateStats() {
            const birthdate = document.getElementById('birthdate').value;
            if (!birthdate) return;

            const birthDate = new Date(birthdate);
            const today = new Date();
            const birthYear = birthDate.getFullYear();
            
            // Calculate weeks lived
            const msInWeek = 1000 * 60 * 60 * 24 * 7;
            const weeksLived = Math.floor((today - birthDate) / msInWeek);

            // Based on "Four Thousand Weeks" concept (~77 years)
            const totalWeeks = 4000;
            const weeksRemaining = Math.max(0, totalWeeks - weeksLived);
            const percentageLived = Math.min(100, Math.round((weeksLived / totalWeeks) * 100));
            
            // Calculate days lived
            const msInDay = 1000 * 60 * 60 * 24;
            const daysLived = Math.floor((today - birthDate) / msInDay);
            
            // Calculate various statistics
            const hoursSlept = Math.floor(daysLived * 8);
            const heartbeats = Math.floor(daysLived * 24 * 60 * 70);
            const breaths = Math.floor(daysLived * 24 * 60 * 16);
            const seasons = Math.floor(daysLived / 91.25);
            
            currentStats = {
                weeksLived, totalWeeks, weeksRemaining, percentageLived,
                daysLived, hoursSlept, heartbeats, breaths, seasons, birthYear
            };

            // Debug log
            console.log('Stats calculated:', {
                weeksLived: currentStats.weeksLived,
                totalWeeks: currentStats.totalWeeks,
                weeksRemaining: currentStats.weeksRemaining,
                percentageLived: currentStats.percentageLived
            });

            displayResults();
        }

        function displayResults() {
            if (!currentStats) return;

            // Hide input section and show grid view
            document.getElementById('inputSection').classList.add('hidden');
            document.getElementById('gridSection').classList.remove('hidden');

            // Generate week grid
            generateWeekGrid();

            // Update statistics (but keep accordion closed)
            updateStatistics();

            // After grid animation completes, show typewriter
            setTimeout(() => {
                document.getElementById('typewriterSection').classList.remove('hidden');
                new FYFTypewriter();
            }, 5000); // Wait for grid animation
        }

        function toggleStats() {
            const accordion = document.getElementById('statsAccordion');
            const toggleArrow = document.getElementById('toggleArrow');
            const isOpen = accordion.classList.contains('open');

            if (isOpen) {
                accordion.classList.remove('open');
                toggleArrow.textContent = '▼';
            } else {
                accordion.classList.add('open');
                toggleArrow.textContent = '▲';
            }
        }

        function scrollStats(direction) {
            currentStatIndex += direction;

            // Clamp index
            if (currentStatIndex < 0) currentStatIndex = 0;
            if (currentStatIndex >= totalStatSections) currentStatIndex = totalStatSections - 1;

            // Update transform
            const statsGrid = document.getElementById('statsGrid');
            const offset = -currentStatIndex * 100;
            statsGrid.style.transform = `translateX(${offset}%)`;

            // Update arrow states
            document.getElementById('arrowLeft').classList.toggle('disabled', currentStatIndex === 0);
            document.getElementById('arrowRight').classList.toggle('disabled', currentStatIndex === totalStatSections - 1);
        }

        function generateWeekGrid() {
            const weekGrid = document.getElementById('weekGrid');
            weekGrid.innerHTML = '';

            // Display ALL 4000 weeks
            const TOTAL_WEEKS = 4000;
            const WEEKS_PER_ROW = 80; // 80 weeks per row for full width
            const TOTAL_ROWS = Math.ceil(TOTAL_WEEKS / WEEKS_PER_ROW); // 50 rows

            const cellsLived = currentStats.weeksLived;
            const cellsCurrent = 1;
            const cellsFuture = TOTAL_WEEKS - cellsLived - cellsCurrent;

            console.log('Grid generation:', {
                totalWeeks: TOTAL_WEEKS,
                weeksLived: currentStats.weeksLived,
                weeksPerRow: WEEKS_PER_ROW,
                rows: TOTAL_ROWS,
                cellsRed: cellsLived,
                cellsGreen: cellsCurrent,
                cellsGray: cellsFuture
            });

            const allCells = [];
            let cellIndex = 0;

            // Create all cells - exactly 4000
            for (let row = 0; row < TOTAL_ROWS; row++) {
                const weekRow = document.createElement('div');
                weekRow.className = 'week-row';

                for (let col = 0; col < WEEKS_PER_ROW; col++) {
                    if (cellIndex >= TOTAL_WEEKS) break;
                    const weekCell = document.createElement('div');
                    weekCell.className = 'week-cell';

                    const isPast = cellIndex < cellsLived;
                    const isCurrent = cellIndex === cellsLived;

                    // All cells start gray (default styling in CSS)

                    // Add hover functionality
                    weekCell.addEventListener('mouseenter', function() {
                        showHoverInfo(cellIndex);
                    });

                    weekCell.addEventListener('mouseleave', function() {
                        hideHoverInfo();
                    });

                    weekRow.appendChild(weekCell);
                    allCells.push({ cell: weekCell, cellIndex, isPast, isCurrent });
                    cellIndex++;
                }

                weekGrid.appendChild(weekRow);
            }

            // Animate cells in sequence
            animateCells(allCells);

            // Update legend counts
            document.getElementById('pastCount').textContent = formatNumber(currentStats.weeksLived);
            document.getElementById('futureCount').textContent = formatNumber(currentStats.weeksRemaining);
        }

        function animateCells(cells) {
            // Filter only past/current cells and animate them in ORDER (left to right, row by row)
            const cellsToAnimate = cells.filter(c => c.isPast || c.isCurrent);

            console.log('Animating cells:', cellsToAnimate.length);

            cellsToAnimate.forEach((cellData, animIndex) => {
                const { cell, isPast, isCurrent } = cellData;

                setTimeout(() => {
                    // Start filling animation (gray → red)
                    cell.classList.add('filling');

                    // After animation completes, set final state
                    setTimeout(() => {
                        cell.classList.remove('filling');

                        if (isPast) {
                            cell.classList.add('week-past');
                        } else if (isCurrent) {
                            cell.classList.add('week-current');
                        }
                    }, 200);

                }, animIndex * 2); // 2ms delay = fast smooth loading
            });
        }

        function showHoverInfo(cellIndex) {
            const hoverInfo = document.getElementById('hoverInfo');
            const hoverText = document.getElementById('hoverText');

            const weekNumber = cellIndex + 1;

            // Don't show info for weeks beyond 4000
            if (weekNumber > 4000) return;

            let message = `Woche ${weekNumber}: `;

            if (cellIndex < currentStats.weeksLived) {
                message += `<span class="coral">Vergangenheit</span>`;
            } else if (cellIndex === currentStats.weeksLived) {
                message += `<span class="mint">Jetzt</span>`;
            } else {
                const weeksInFuture = cellIndex - currentStats.weeksLived;
                message += `<span class="steel">In ${weeksInFuture} Wochen</span>`;
            }

            hoverText.innerHTML = message;
            hoverInfo.classList.remove('hidden');
        }

        function hideHoverInfo() {
            document.getElementById('hoverInfo').classList.add('hidden');
        }

        function updateStatistics() {
            // Life Metrics
            document.getElementById('weeksLived').textContent = formatNumber(currentStats.weeksLived);
            document.getElementById('percentageLived').textContent = currentStats.percentageLived;
            document.getElementById('daysLived').textContent = formatNumber(currentStats.daysLived);
            document.getElementById('seasons').textContent = formatNumber(currentStats.seasons);
            document.getElementById('heartbeats').textContent = formatNumber(currentStats.heartbeats);
            document.getElementById('breaths').textContent = formatNumber(currentStats.breaths);

            // Societal Context
            document.getElementById('birthPopulation').textContent = formatNumber(getPopulationAtYear(currentStats.birthYear));
            document.getElementById('peopleMet').textContent = formatNumber(Math.round(80000 * (currentStats.percentageLived/100)));
            document.getElementById('totalBirths').textContent = formatNumber(Math.round(currentStats.daysLived * 385000));
            document.getElementById('totalDeaths').textContent = formatNumber(Math.round(currentStats.daysLived * 166000));

            // Cosmic Perspective
            document.getElementById('distanceTraveled').textContent = formatNumber(Math.round(currentStats.daysLived * 1.6 * 1000000));
            document.getElementById('universePercentage').textContent = (80/13800000000 * 100).toFixed(10);
            document.getElementById('galaxyDistance').textContent = formatNumber(Math.round(currentStats.daysLived * 24 * 828000));

            // Natural Rhythms
            document.getElementById('lunarCycles').textContent = formatNumber(Math.round(currentStats.daysLived / 29.53));
            document.getElementById('solarYears').textContent = formatNumber(Math.floor(currentStats.daysLived / 365.25));
            document.getElementById('sequoiaPercentage').textContent = ((currentStats.daysLived / 365.25) / 3000 * 100).toFixed(2);
        }

        function resetVisualization() {
            currentStats = null;
            currentStatIndex = 0;
            document.getElementById('inputSection').classList.remove('hidden');
            document.getElementById('gridSection').classList.add('hidden');
            document.getElementById('typewriterSection').classList.add('hidden');
            document.getElementById('birthdate').value = '';
            document.getElementById('submitBtn').disabled = true;

            // Reset accordion
            document.getElementById('statsAccordion').classList.remove('open');
            document.getElementById('toggleArrow').textContent = '▼';

            // Reset stats scroll
            document.getElementById('statsGrid').style.transform = 'translateX(0)';
            document.getElementById('arrowLeft').classList.add('disabled');
            document.getElementById('arrowRight').classList.remove('disabled');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize arrow states
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('arrowLeft').classList.add('disabled');
        });

        // Scroll to navigation section
        function scrollToNavigation() {
            const navSection = document.getElementById('navigationSection');
            navSection.classList.remove('hidden');
            navSection.scrollIntoView({ behavior: 'smooth' });
        }

        // Black Hole Animation
        function blackhole(element) {
            const container = document.querySelector(element);
            if (!container) return;

            const h = container.offsetHeight;
            const w = container.offsetWidth;
            const cw = w;
            const ch = h;
            const maxorbit = 450; // Increased from 255 to make circle much larger
            const centery = ch / 2;
            const centerx = cw / 2;

            const startTime = new Date().getTime();
            let currentTime = 0;

            const stars = [];

            const canvas = document.createElement('canvas');
            canvas.width = cw;
            canvas.height = ch;
            container.appendChild(canvas);
            const context = canvas.getContext("2d");

            function setDPI(canvas, dpi) {
                if (!canvas.style.width)
                    canvas.style.width = canvas.width + 'px';
                if (!canvas.style.height)
                    canvas.style.height = canvas.height + 'px';

                const scaleFactor = dpi / 96;
                canvas.width = Math.ceil(canvas.width * scaleFactor);
                canvas.height = Math.ceil(canvas.height * scaleFactor);
                const ctx = canvas.getContext('2d');
                ctx.scale(scaleFactor, scaleFactor);
            }

            function rotate(cx, cy, x, y, angle) {
                const radians = angle;
                const cos = Math.cos(radians);
                const sin = Math.sin(radians);
                const nx = (cos * (x - cx)) + (sin * (y - cy)) + cx;
                const ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;
                return [nx, ny];
            }

            setDPI(canvas, 192);

            class Star {
                constructor() {
                    const rands = [];
                    rands.push(Math.random() * (maxorbit / 2) + 1);
                    rands.push(Math.random() * (maxorbit / 2) + maxorbit);

                    this.orbital = (rands.reduce((p, c) => p + c, 0) / rands.length);

                    this.x = centerx;
                    this.y = centery + this.orbital;
                    this.yOrigin = centery + this.orbital;

                    this.speed = (Math.floor(Math.random() * 0.8) + 0.2) * Math.PI / 180;
                    this.rotation = 0;
                    this.startRotation = (Math.floor(Math.random() * 360) + 1) * Math.PI / 180;

                    this.color = 'rgba(255,255,255,' + (1 - ((this.orbital) / 450)) + ')';

                    this.prevR = this.startRotation;
                    this.prevX = this.x;
                    this.prevY = this.y;

                    stars.push(this);
                }

                draw() {
                    this.rotation = this.startRotation + (currentTime * this.speed);

                    if (this.y > this.yOrigin) {
                        this.y -= 2.5;
                    }
                    if (this.y < this.yOrigin - 4) {
                        this.y += (this.yOrigin - this.y) / 10;
                    }

                    context.save();
                    context.fillStyle = this.color;
                    context.strokeStyle = this.color;
                    context.beginPath();
                    const oldPos = rotate(centerx, centery, this.prevX, this.prevY, -this.prevR);
                    context.moveTo(oldPos[0], oldPos[1]);
                    context.translate(centerx, centery);
                    context.rotate(this.rotation);
                    context.translate(-centerx, -centery);
                    context.lineTo(this.x, this.y);
                    context.stroke();
                    context.restore();

                    this.prevR = this.rotation;
                    this.prevX = this.x;
                    this.prevY = this.y;
                }
            }

            function loop() {
                const now = new Date().getTime();
                currentTime = (now - startTime) / 50;

                context.fillStyle = 'rgba(10,10,10,0.15)';
                context.fillRect(0, 0, cw, ch);

                for (let i = 0; i < stars.length; i++) {
                    if (stars[i] !== undefined) {
                        stars[i].draw();
                    }
                }

                requestAnimationFrame(loop);
            }

            function init() {
                context.fillStyle = 'rgba(10,10,10,1)';
                context.fillRect(0, 0, cw, ch);
                for (let i = 0; i < 3000; i++) {
                    new Star();
                }
                loop();
            }

            init();
        }

        // Initialize blackhole when typewriter section becomes visible
        const typewriterObserver = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                const target = mutation.target;
                if (target.id === 'typewriterSection' && !target.classList.contains('hidden')) {
                    setTimeout(() => {
                        blackhole('#blackhole');
                    }, 100);
                    typewriterObserver.disconnect();
                }
            });
        });

        const typewriterSection = document.getElementById('typewriterSection');
        if (typewriterSection) {
            typewriterObserver.observe(typewriterSection, {
                attributes: true,
                attributeFilter: ['class']
            });
        }
    </script>
</body>
</html>